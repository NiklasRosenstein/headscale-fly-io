server_url: https://${HEADSCALE_SERVER_DOMAIN}
listen_addr: 0.0.0.0:8080
metrics_listen_addr: 0.0.0.0:8081

# TODO: Expose GRPC API? So that it can be accessed with the headscale CLI
#       externally, see https://github.com/juanfont/headscale/blob/main/docs/remote-cli.md
# grpc_listen_addr: 0.0.0.0:8081
# grpc_allow_insecure: true

log:
  level: ${HEADSCALE_LOG_LEVEL}

noise:
  private_key_path: /var/lib/headscale/noise_private.key

database:
  type: sqlite
  sqlite:
    path: /var/lib/headscale/db.sqlite
    write_ahead_log: true

prefixes:
  v6: ${HEADSCALE_PREFIXES_V6}
  v4: ${HEADSCALE_PREFIXES_V4}
  allocation: ${HEADSCALE_PREFIXES_ALLOCATION}

policy:
  mode: file
  path: ""  # TODO: Support ACL policy files?

derp:
  server:
    enabled: ${HEADSCALE_DERP_SERVER_ENABLED}
    region_id: 999
    region_code: headscale-${PRIMARY_REGION}
    region_name: Headscale Embedded DERP
    stun_listen_addr: 0.0.0.0:3478
    ipv6: ${FLY_PUBLIC_IP}
  urls: [ ${HEADSCALE_DERP_URLS} ]

dns:
  base_domain: ${HEADSCALE_DNS_BASE_DOMAIN}
