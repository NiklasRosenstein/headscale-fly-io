server_url: https://${FLY_APP_NAME}.fly.dev
listen_addr: 0.0.0.0:8080
metrics_listen_addr: 0.0.0.0:8081

# TODO: Expose GRPC API? So that it can be accessed with the headscale CLI
#       externally, see https://github.com/juanfont/headscale/blob/main/docs/remote-cli.md
# grpc_listen_addr: 0.0.0.0:8081
# grpc_allow_insecure: true

log:
  level: info

noise:
  private_key_path: /var/lib/headscale/noise_private.key

database:
  type: sqlite
  sqlite:
    path: /var/lib/headscale/db.sqlite
    write_ahead_log: true

prefixes:
  v6: fd7a:115c:a1e0::/48
  v4: 100.64.0.0/10
  allocation: random

policy:
  mode: file
  path: ""  # TODO: Support ACL policy files?

derp:
  urls:
  - https://controlplane.tailscale.com/derpmap/default

dns:
  base_domain: tailnet

# TODO: Support configuring OIDC
# oidc:
#   only_start_if_oidc_is_available: true
#   enabled: true
#   issuer: "${var.oidc.issuer}"
#   client_id: "${var.oidc.client_id}"
#   client_secret: "${sensitive(var.oidc.client_secret)}"
#   use_expiry_from_token: false
#   scope: ${jsonencode(var.oidc.issuer)}
#   extra_params: {}
#   allowed_domains: []
#   allowed_groups: ${jsonencode(var.oidc.issuer)}
#   allowed_users: []
#   strip_email_domain: true
